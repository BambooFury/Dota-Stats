const pluginName="yourname.dotastats";function InitializePlugins(){!window.PLUGIN_LIST&&(window.PLUGIN_LIST={}),window.PLUGIN_LIST[pluginName]||(window.PLUGIN_LIST[pluginName]={})}InitializePlugins();var millennium_main=function(t){"use strict";return t.default=async function(){console.log("__DOTASTATS__ Front End Loaded.");try{const t=await Millennium.findElement(document,".profile_rightcol");if(!t||0===t.length)return void console.error("[dotastats] .profile_rightcol not found");const n=t[0];if(n.querySelector(".dotastats-card"))return;try{if(!document.getElementById("dotastats-style")){const t=document.createElement("style");t.id="dotastats-style",t.textContent="\n                        .dotastats-card {\n                            position: relative;\n                            overflow: visible;\n                            background: transparent;\n                            border-radius: 10px;\n                            padding: 14px 14px 10px;\n                            color: #f5f5f5;\n                            font-size: 13px;\n                            margin-bottom: 10px;\n                            box-shadow: none;\n                        }\n                        .dotastats-dotabuff-btn {\n                            position: absolute;\n                            top: 4px;\n                            right: 6px;\n                            width: 20px;\n                            height: 20px;\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            text-decoration: none;\n                            cursor: pointer;\n                            user-select: none;\n                        }\n                        .dotastats-dotabuff-btn img {\n                            width: 100%;\n                            height: 100%;\n                            object-fit: contain;\n                            filter: drop-shadow(0 0 4px rgba(0, 0, 0, 0.8));\n                            transition: transform 0.15s ease, filter 0.15s ease;\n                        }\n                        .dotastats-dotabuff-btn:hover img {\n                            transform: translateY(-1px);\n                            filter: drop-shadow(0 0 6px rgba(0, 0, 0, 0.95));\n                        }\n                        .dotastats-name-row {\n                            position: relative;\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            font-weight: 600;\n                            font-size: 12px;\n                            margin-bottom: 4px;\n                        }\n                        .dotastats-name-row span {\n                            white-space: nowrap;\n                            overflow: hidden;\n                            text-overflow: ellipsis;\n                        }\n                        .dotastats-rank {\n                            position: relative;\n                            display: flex;\n                            justify-content: center;\n                            margin: 4px 0 0;\n                        }\n                        .dotastats-rank-circle {\n                            width: 52px;\n                            height: 52px;\n                            border-radius: 50%;\n                            background: transparent;\n                            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.65), 0 0 10px rgba(255, 190, 90, 0.8);\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            position: relative;\n                        }\n                        .dotastats-rank-icon {\n                            width: 56px;\n                            height: 56px;\n                            object-fit: contain;\n                        }\n                        .dotastats-rank-icon-unranked {\n                            transform: translateX(-2px);\n                        }\n                        .dotastats-top-rank {\n                            position: absolute;\n                            bottom: 2px;\n                            left: 50%;\n                            transform: translateX(-50%);\n                            font-size: 11px;\n                            font-weight: 700;\n                            color: #ffffff;\n                            text-shadow: 0 0 3px rgba(0, 0, 0, 0.9), 0 0 6px rgba(0, 0, 0, 0.9);\n                            pointer-events: none;\n                        }\n                        .dotastats-rank-label {\n                            margin-top: 2px;\n                            font-size: 11px;\n                            text-align: center;\n                            opacity: 0.95;\n                        }\n                        .dotastats-stats {\n                            position: relative;\n                            margin-top: 4px;\n                        }\n                        .dotastats-stats-line {\n                            font-size: 11px;\n                            text-align: center;\n                            white-space: nowrap;\n                        }\n                        .dotastats-stats-line b {\n                            font-weight: 600;\n                            font-size: 12px;\n                        }\n                        .dotastats-footer {\n                            position: relative;\n                            margin-top: 6px;\n                            border-top: 1px dashed rgba(255,255,255,0.18);\n                            padding-top: 4px;\n                            text-align: center;\n                            font-size: 11px;\n                        }\n                        .dotastats-footer a {\n                            color: #ffcc55;\n                            text-decoration: none;\n                            transition: color 0.15s ease, text-shadow 0.15s ease;\n                        }\n                        .dotastats-footer a:hover {\n                            color: #ffe08a;\n                            text-shadow: 0 0 6px rgba(255, 218, 120, 0.8);\n                        }\n                        .dotastats-source-note {\n                            margin-top: 3px;\n                            font-size: 9px;\n                            text-align: center;\n                            color: rgba(255, 255, 255, 0.45);\n                        }\n                    ",document.head.appendChild(t)}}catch(t){console.error("[dotastats] failed to inject styles",t)}const a=document.createElement("div");a.className="account-row",a.innerHTML='\n                <div class="dotastats-card">\n                    <a id="dotastats-dotabuff" class="dotastats-dotabuff-btn" href="#" target="_blank" title="Open Dotabuff">\n                        <img src="https://steamloopback.host/DotaRanks/dotabuff_icon.png" alt="Dotabuff" />\n                    </a>\n                    <div class="dotastats-name-row"><span id="dotastats-name"></span></div>\n                    <div class="dotastats-rank">\n                        <div id="dotastats-rank-circle" class="dotastats-rank-circle">\n                            <img id="dotastats-rank-icon" class="dotastats-rank-icon" src="https://steamloopback.host/DotaRanks/rank_icon_unranked.png" alt="Unranked" />\n                            <div id="dotastats-top-rank" class="dotastats-top-rank" style="display:none;"></div>\n                        </div>\n                    </div>\n                    <div id="dotastats-rank-label" class="dotastats-rank-label">Unranked</div>\n                    <div class="dotastats-stats">\n                        <div class="dotastats-stats-line">\n                            Matches: <b id="dotastats-matches">...</b>\n                            &nbsp; MMR: <b id="dotastats-mmr">...</b>\n                            &nbsp; WR: <b id="dotastats-winrate">...</b>\n                        </div>\n                    </div>\n                    <div class="dotastats-footer">\n                        <a id="dotastats-link" href="#" target="_blank">Show detailed Dota stats</a>\n                        <div class="dotastats-source-note">Data: OpenDota, may differ from Dota 2 client</div>\n                    </div>\n                </div>\n            ',n.insertBefore(a,n.children[1]||null);try{const t=new DOMParser,n=`${window.location.href}?xml=1`,a=await fetch(n),e=await a.text(),o=t.parseFromString(e,"application/xml"),s=o.querySelector("steamID64")?.textContent||null;if(!s)return void console.error("[dotastats] steamID64 not found in XML profile");let i;try{const t=BigInt("76561197960265728");i=(BigInt(s)-t).toString()}catch(t){return void console.error("[dotastats] BigInt not supported or conversion failed",t)}const r=document.getElementById("dotastats-matches"),d=document.getElementById("dotastats-winrate"),l=document.getElementById("dotastats-mmr"),c=document.getElementById("dotastats-name"),p=document.getElementById("dotastats-rank-icon"),f=document.getElementById("dotastats-rank-circle"),m=document.getElementById("dotastats-rank-label"),g=document.getElementById("dotastats-top-rank"),u=document.getElementById("dotastats-dotabuff"),b=document.getElementById("dotastats-link");b&&(b.href=`https://www.opendota.com/players/${i}`),u&&(u.href=`https://www.dotabuff.com/players/${i}`);try{const[t,n]=await Promise.all([fetch(`https://api.opendota.com/api/players/${i}`),fetch(`https://api.opendota.com/api/players/${i}/wl`)]),a=await t.json(),e=await n.json(),o=e.win||0,s=o+(e.lose||0),u=s>0,b=u?o/s*100:0;let x=a.mmr_estimate?.estimate||a.solo_competitive_rank||null;const h=a.rank_tier||null,w=a.leaderboard_rank||null,y=((document.querySelector(".actual_persona_name")||document.querySelector(".profile_header .persona_name"))?.textContent||a.profile?.personaname||null),y=y?y.trim():null;if(r&&(r.textContent=u?String(s):"hidden"),d&&(d.textContent=u?`${b.toFixed(2)}%`:"hidden"),c&&(c.textContent=y),p&&(p.src="https://steamloopback.host/DotaRanks/rank_icon_unranked.png"),p.classList.add("dotastats-rank-icon-unranked"),h){const t=String(h).padStart(2,"0"),n=parseInt(t.charAt(0),10);let a=parseInt(t.charAt(1),10);if((!Number.isFinite(a)||a<1)&&(a=1),a>5&&(a=5),p&&(p.src=`https://steamloopback.host/DotaRanks/rank_icon_${n}_${a}.png`),p.classList.remove("dotastats-rank-icon-unranked"),null==x||"N/A"===x){const t={1:{1:0,2:154,3:308,4:462,5:616},2:{1:770,2:924,3:1078,4:1232,5:1386},3:{1:1540,2:1694,3:1848,4:2002,5:2156},4:{1:2310,2:2464,3:2618,4:2772,5:2926},5:{1:3080,2:3234,3:3388,4:3542,5:3696},6:{1:3850,2:4004,3:4158,4:4312,5:4466},7:{1:4620,2:4820,3:5020,4:5220,5:5420},8:{1:6200,2:6400,3:6600,4:6800,5:7e3}}[n];t&&(t[a]?x=t[a]:t[5]&&(x=t[5]))}if(f){const t={1:"rgba(80, 200, 120, 0.9)",2:"rgba(180, 120, 60, 0.9)",3:"rgba(90, 200, 255, 0.9)",4:"rgba(140, 160, 255, 0.9)",5:"rgba(255, 215, 120, 0.95)",6:"rgba(255, 160, 90, 0.95)",7:"rgba(190, 120, 255, 0.95)",8:"rgba(255, 255, 255, 0.95)"}[n]||"rgba(255, 190, 90, 0.8)";f.style.boxShadow=`0 0 0 2px rgba(0, 0, 0, 0.65), 0 0 14px ${t}`}if(g)if(8===n&&w)try{const t=Number(w).toLocaleString("en-US");g.textContent=t,g.style.display="block"}catch{g.textContent=String(w),g.style.display="block"}else g.style.display="none";if(m){const t={1:"Herald",2:"Guardian",3:"Crusader",4:"Archon",5:"Legend",6:"Ancient",7:"Divine",8:"Immortal"}[n]||"Unranked",e=n>=8?t:`${t} ${a}`;m.textContent=e}}else{if(p){p.src="https://steamloopback.host/DotaRanks/rank_icon_unranked.png";p.classList.add("dotastats-rank-icon-unranked")}if(m){m.textContent="Unranked"}if(g){g.style.display="none"}if(f){f.style.boxShadow="0 0 0 2px rgba(0, 0, 0, 0.65), 0 0 14px rgba(255, 255, 255, 0.95)"}}l&&(l.textContent=null!=x?String(x):"")}catch(t){console.error("[dotastats] failed to load OpenDota data",t)}}catch(t){console.error("[dotastats] unexpected error while resolving OpenDota stats",t)}}catch(t){console.error("[dotastats] error while injecting widget",t)}},Object.defineProperty(t,"__esModule",{value:!0}),t}({});function ExecuteWebkitModule(){Object.assign(window.PLUGIN_LIST[pluginName],millennium_main),millennium_main.default()}ExecuteWebkitModule();


